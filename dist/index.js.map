{"version":3,"sources":["../index.js"],"names":["require","load","app","server","Server","io","listen","process","env","PORT","console","log","on","socket","global","bcrypt","jwt","validator","nodemailer","path","qr","knex","NODE_ENV","disable","use","options","bodyParser","urlencoded","extended","json","authRoute","verifyJwt","userRoute","residentRoute","reservationRoute","realtyRoute","occurrenceRoute","expenditureRoute","entryScheduleRoute","forgotPassword","express","static","resolve","__dirname","req","res","sendFile"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AA6BA;;;;AAEA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAGA;;;;;;AAtDAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,IAAlB;;AAEA,MAAMC,GAAG,GAAG,wBAAZ;;AAEA,IAAIC,MAAM,GAAGH,OAAO,CAAC,MAAD,CAAP,CAAgBI,MAAhB,CAAuBF,GAAvB,CAAb;;AACA,IAAIG,EAAE,GAAGL,OAAO,CAAC,WAAD,CAAP,CAAqBG,MAArB,CAAT;;AAEAA,MAAM,CAACG,MAAP,CAAcC,OAAO,CAACC,GAAR,CAAYC,IAA1B,EAA+B,MAAI;AAC/BC,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAmBJ,OAAO,CAACC,GAAR,CAAYC,IAA3C;AACH,CAFD;AAIAJ,EAAE,CAACO,EAAH,CAAM,YAAN,EAAoBC,MAAM,IAAEC,MAAM,CAACD,MAAP,GAAiBA,MAA7C;AACAC,MAAM,CAACC,MAAP,GAAgBA,gBAAhB;AACAD,MAAM,CAACE,GAAP,GAAaA,sBAAb;AACAF,MAAM,CAACG,SAAP,GAAmBA,mBAAnB;AACAH,MAAM,CAACI,UAAP,GAAoBA,oBAApB;AACAJ,MAAM,CAACK,IAAP,GAAcA,cAAd;AACAL,MAAM,CAACM,EAAP,GAAYA,iBAAZ;AACAN,MAAM,CAACO,IAAP,GAAcrB,OAAO,CAAC,MAAD,CAAP,CAAgBA,OAAO,CAAC,eAAD,CAAP,CAAyBO,OAAO,CAACC,GAAR,CAAYc,QAAZ,IAAwB,aAAjD,CAAhB,CAAd;AAGApB,GAAG,CAACqB,OAAJ,CAAY,cAAZ;AACArB,GAAG,CAACsB,GAAJ,CAAQ,qBAAR;AACAtB,GAAG,CAACuB,OAAJ,CAAY,GAAZ,EAAiB,qBAAjB;AACAvB,GAAG,CAACsB,GAAJ,CAAQ,kCAAR;AACAtB,GAAG,CAACsB,GAAJ,CAAQE,qBAAWC,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AACA1B,GAAG,CAACsB,GAAJ,CAAQE,qBAAWG,IAAX,EAAR;AAKA3B,GAAG,CAACsB,GAAJ,CAAQ,GAAR,EAAaM,mBAAb;AAGA5B,GAAG,CAACsB,GAAJ,CAAQ,OAAR,EAAgBO,mBAAhB,EAA2BC,mBAA3B;AAGA9B,GAAG,CAACsB,GAAJ,CAAQ,WAAR,EAAqBO,mBAArB,EAAgCE,uBAAhC;AAGA/B,GAAG,CAACsB,GAAJ,CAAQ,cAAR,EAAwBO,mBAAxB,EAAmCG,0BAAnC;AAGAhC,GAAG,CAACsB,GAAJ,CAAQ,SAAR,EAAmBO,mBAAnB,EAA8BI,qBAA9B;AAGAjC,GAAG,CAACsB,GAAJ,CAAQ,aAAR,EAAsBO,mBAAtB,EAAiCK,yBAAjC;AAGAlC,GAAG,CAACsB,GAAJ,CAAQ,cAAR,EAAuBO,mBAAvB,EAAkCM,0BAAlC;AAGAnC,GAAG,CAACsB,GAAJ,CAAQ,iBAAR,EAA2Bc,4BAA3B;AAGApC,GAAG,CAACsB,GAAJ,CAAQ,iBAAR,EAA2Be,wBAA3B;AAEArC,GAAG,CAACsB,GAAJ,CAAQ,UAAR,EAAoBO,mBAApB,EAA+BS,kBAAQC,MAAR,CAAetB,eAAKuB,OAAL,CAAaC,SAAb,EAAwB,GAAxB,CAAf,CAA/B;AAEAzC,GAAG,CAACsB,GAAJ,CAAQ,GAAR,EAAa,CAACoB,GAAD,EAAMC,GAAN,KAAc;AACvBA,EAAAA,GAAG,CAACC,QAAJ,CAAaH,SAAS,GAAG,aAAzB;AACH,CAFD","sourcesContent":["import express from 'express'\r\nimport path from 'path'\r\nimport bodyParser from 'body-parser'\r\nimport bcrypt from 'bcrypt'\r\nimport jwt from 'jsonwebtoken'\r\nimport validator from 'validator'\r\nimport nodemailer from 'nodemailer'\r\nimport upload from 'express-fileupload'\r\nimport cors from 'cors'\r\nimport qr from 'qr-image'\r\nrequire(\"dotenv\").load();\r\n\r\nconst app = express()\r\n\r\nvar server = require('http').Server(app);\r\nvar io = require('socket.io')(server);\r\n\r\nserver.listen(process.env.PORT,()=>{\r\n    console.log('ouvindo porta ' + process.env.PORT)\r\n})\r\n \r\nio.on('connection', socket=>global.socket =  socket)\r\nglobal.bcrypt = bcrypt\r\nglobal.jwt = jwt\r\nglobal.validator = validator\r\nglobal.nodemailer = nodemailer\r\nglobal.path = path\r\nglobal.qr = qr\r\nglobal.knex = require('knex')(require('./db/knexfile')[process.env.NODE_ENV || 'development'])\r\n\r\n\r\napp.disable('x-powered-by');\r\napp.use(cors())\r\napp.options('*', cors())\r\napp.use(upload())\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(bodyParser.json())\r\n\r\nimport verifyJwt from './middleware/verifyJwt'\r\n\r\nimport authRoute from './routes/authRoute'\r\napp.use('/', authRoute)\r\n\r\nimport userRoute from './routes/userRoute'\r\napp.use('/user',verifyJwt, userRoute)\r\n\r\nimport residentRoute from './routes/residentRoute'\r\napp.use('/resident', verifyJwt, residentRoute)\r\n\r\nimport reservationRoute from './routes/reservationRoute'\r\napp.use('/reservation', verifyJwt, reservationRoute)\r\n\r\nimport realtyRoute from './routes/realtyRoute'\r\napp.use('/realty', verifyJwt, realtyRoute)\r\n\r\nimport occurrenceRoute from './routes/occurrenceRoute'\r\napp.use('/occurrence',verifyJwt, occurrenceRoute)\r\n\r\nimport expenditureRoute from './routes/expenditureRoute'\r\napp.use('/expenditure',verifyJwt, expenditureRoute)\r\n\r\nimport entryScheduleRoute from './routes/entryScheduleRoute'\r\napp.use('/entry_schedule', entryScheduleRoute)\r\n\r\nimport forgotPassword from './routes/forgotPassword'\r\napp.use('/forgotPassword', forgotPassword)\r\n\r\napp.use('/uploads', verifyJwt, express.static(path.resolve(__dirname, '.')))\r\n\r\napp.use('/', (req, res) => {\r\n    res.sendFile(__dirname + \"/index.html\")\r\n})\r\n\r\n\r\n\r\n"],"file":"index.js"}